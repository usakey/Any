!function(a){"use strict";var b=function(a){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than %s.",max:"This value should be lower than %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(a)};b.prototype={constructor:b,validators:{notnull:function(a){return a.length>0},notblank:function(a){return null!==a&&""!==a.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(a){if("object"==typeof a){for(var b in a)if(this.required(a[b]))return!0;return!1}return this.notnull(a)&&this.notblank(a)},type:function(a,b){var c;switch(b){case"number":c=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":c=/^\d+$/;break;case"alphanum":c=/^\w+$/;break;case"email":c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])+)*)|((")(((( |	)*(\x0d\x0a))?( |	)+)?(([--]|!|[#-[]|[]-~]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(\\([-	\x0d-]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯]))))*((( |	)*(\x0d\x0a))?( |	)+)?(")))@((([a-z]|\d|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(([a-z]|\d|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])*([a-z]|\d|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])))\.)+(([a-z]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(([a-z]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])*([a-z]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])))$/i;break;case"url":a=new RegExp("(https?|s?ftp|git)","i").test(a)?a:"http://"+a;case"urlstrict":c=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(([a-z]|\d|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])*([a-z]|\d|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])))\.)+(([a-z]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(([a-z]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])*([a-z]|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[î€€-ï£¿]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[Â -íŸ¿ï¤€-ï·ï·°-ï¿¯])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":c=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;default:return!1}return""!==a?c.test(a):!1},regexp:function(a,b){return new RegExp(b,"i").test(a)},minlength:function(a,b){return a.length>=b},maxlength:function(a,b){return a.length<=b},rangelength:function(a,b){return this.minlength(a,b[0])&&this.maxlength(a,b[1])},min:function(a,b){return Number(a)>=b},max:function(a,b){return Number(a)<=b},range:function(a,b){return a>=b[0]&&a<=b[1]},equalto:function(b,c,d){return d.options.validateIfUnchanged=!0,b===a(c).val()},remote:function(b,c,d){var e=null,f={},g={};f[d.$element.attr("name")]=b,"undefined"!=typeof d.options.remoteDatatype&&(g={dataType:d.options.remoteDatatype});var h=function(a,b){d.removeError("remote"),d.updtConstraint({name:"remote",isValid:a},b),d.manageValidationResult()},i=function(b){if("object"==typeof b)return b;try{b=a.parseJSON(b)}catch(c){}return b},j=function(a){return"object"==typeof a&&null!==a?"undefined"!=typeof a.error?a.error:"undefined"!=typeof a.message?a.message:null:null};return a.ajax(a.extend({},{url:c,data:f,async:d.async,type:d.options.remoteMethod||"GET",success:function(a){a=i(a),h(1===a||!0===a||"object"==typeof a&&null!==a&&"undefined"!=typeof a.success,j(a))},error:function(a){a=i(a),h(!1,j(a))}},g)),d.async&&h(e),e},mincheck:function(a,b){return this.minlength(a,b)},maxcheck:function(a,b){return this.maxlength(a,b)},rangecheck:function(a,b){return this.rangelength(a,b)}},init:function(a){var b,c=a.validators,d=a.messages;for(b in c)this.addValidator(b,c[b]);for(b in d)this.addMessage(b,d[b])},formatMesssage:function(a,b){if("object"==typeof b){for(var c in b)a=this.formatMesssage(a,b[c]);return a}return"string"==typeof a?a.replace(new RegExp("%s","i"),b):""},addValidator:function(a,b){this.validators[a]=b},addMessage:function(a,b,c){if("undefined"!=typeof c&&!0===c)return void(this.messages.type[a]=b);if("type"!==a)this.messages[a]=b;else for(var d in b)this.messages.type[d]=b[d]}};var c=function(a,c,d){this.options=c,this.Validator=new b(c),this.init(a,d||"ParsleyField")};c.prototype={constructor:c,init:function(b,c){this.type=c,this.isValid=!0,this.element=b,this.validatedOnce=!1,this.$element=a(b),this.val=this.$element.val(),this.isRequired=!1,this.constraints=[],"undefined"==typeof this.isRadioOrCheckbox&&(this.isRadioOrCheckbox=!1,this.hash=this.generateHash(),this.errorClassHandler=this.options.errors.classHandler(b,this.isRadioOrCheckbox)||this.$element),this.ulErrorManagement(),this.bindHtml5Constraints(),this.addConstraints(),this.constraints.length&&this.bindValidationEvents()},setParent:function(b){this.$parent=a(b)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&(this.options.required=!0),"undefined"!=typeof this.$element.attr("type")&&new RegExp(this.$element.attr("type"),"i").test("email url number range")&&(this.options.type=this.$element.attr("type"),new RegExp(this.options.type,"i").test("number range")&&(this.options.type="number","undefined"!=typeof this.$element.attr("min")&&this.$element.attr("min").length&&(this.options.min=this.$element.attr("min")),"undefined"!=typeof this.$element.attr("max")&&this.$element.attr("max").length&&(this.options.max=this.$element.attr("max")))),"string"==typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length&&(this.options.regexp=this.$element.attr("pattern"))},addConstraints:function(){for(var a in this.options){var b={};b[a]=this.options[a],this.addConstraint(b,!0)}},addConstraint:function(a,b){for(var c in a)c=c.toLowerCase(),"function"==typeof this.Validator.validators[c]&&(this.constraints.push({name:c,requirements:a[c],isValid:null}),"required"===c&&(this.isRequired=!0),this.addCustomConstraintMessage(c));"undefined"==typeof b&&this.bindValidationEvents()},updateConstraint:function(a,b){for(var c in a)this.updtConstraint({name:c,requirements:a[c],isValid:null},b)},updtConstraint:function(b,c){for(var d in this.constraints)this.constraints[d].name===b.name&&(this.constraints[d]=a.extend(!0,this.constraints[d],b),"string"==typeof c&&(this.Validator.messages[this.constraints[d].name]=c));this.bindValidationEvents()},removeConstraint:function(a){var a=a.toLowerCase(),b=[];for(var c in this.constraints)this.constraints[c].name!==a&&b.push(this.constraints[c]);return"required"===a&&(this.isRequired=!1),this.constraints=b,0===b.length?"ParsleyForm"==typeof this.getParent()?void this.getParent().removeItem(this.$element):void this.destroy():void this.bindValidationEvents()},addCustomConstraintMessage:function(a){var b=a+("type"===a&&"undefined"!=typeof this.options[a]?this.options[a].charAt(0).toUpperCase()+this.options[a].substr(1):"")+"Message";"undefined"!=typeof this.options[b]&&this.Validator.addMessage("type"===a?this.options[a]:a,this.options[b],"type"===a)},bindValidationEvents:function(){this.isValid=null,this.$element.addClass("parsley-validated"),this.$element.data("events")&&this.$element.off("."+this.type),this.options.remote&&!new RegExp("change","i").test(this.options.trigger)&&(this.options.trigger=this.options.trigger?" change":"change");var b=(this.options.trigger?this.options.trigger+" ":"")+(new RegExp("key","i").test(this.options.trigger)?"":"keyup");this.$element.is("select")&&(b+=new RegExp("change","i").test(b)?"":" change"),this.$element.on((b+" ").split(" ").join("."+this.type+" "),!1,a.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.val()},eventValidation:function(a){var b=this.getVal();return"keyup"!==a.type||/keyup/i.test(this.options.trigger)||this.validatedOnce?"change"!==a.type||/change/i.test(this.options.trigger)||this.validatedOnce?!this.isRadioOrCheckbox&&b.length<this.options.validationMinlength&&!this.validatedOnce?!0:void this.validate(!0,!1):!0:!0},isFieldValid:function(){return this.validate(!1,!1)},validate:function(a,b){var c=this.getVal(),d=null;return 0===this.constraints.length?null:this.options.listeners.onFieldValidate(this.element,this)||""===c&&!this.isRequired?(this.reset(),null):this.needsValidation(c)?(this.errorBubbling="undefined"!=typeof a?a:!0,this.async="undefined"!=typeof b?b:!0,d=this.applyValidators(),this.errorBubbling&&this.manageValidationResult(),d):this.isValid},needsValidation:function(a){return!this.options.validateIfUnchanged&&null!==this.isValid&&this.val===a&&this.validatedOnce?!1:(this.val=a,this.validatedOnce=!0)},applyValidators:function(){for(var a=null,b=0;b<this.constraints.length;b++){var c=this.Validator.validators[this.constraints[b].name](this.val,this.constraints[b].requirements,this);!1===c?(a=!1,this.constraints[b].isValid=a):!0===c&&(this.constraints[b].isValid=!0,a=!1!==a)}return a},manageValidationResult:function(){for(var a=null,b=0;b<this.constraints.length;b++)!1===this.constraints[b].isValid?(this.manageError(this.constraints[b]),a=!1):!0===this.constraints[b].isValid&&(this.removeError(this.constraints[b].name),a=!1!==a);return this.isValid=a,!0===this.isValid?(this.removeErrors(),this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass),this.options.listeners.onFieldSuccess(this.element,this.constraints,this),!0):!1===this.isValid?(this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass),this.options.listeners.onFieldError(this.element,this.constraints,this),!1):a},ulErrorManagement:function(){this.ulError="#"+this.hash,this.ulTemplate=a(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(b){var c=this.ulError+" ."+b;this.options.animate?a(c).fadeOut(this.options.animateDuration,function(){a(this).remove()}):a(c).remove(),this.ulError&&0===a(this.ulError).children().length&&this.removeErrors()},addError:function(b){for(var c in b){var d=a(this.options.errors.errorElem).addClass(c);a(this.ulError).append(this.options.animate?a(d).text(b[c]).hide().fadeIn(this.options.animateDuration):a(d).text(b[c]))}},removeErrors:function(){this.options.animate?a(this.ulError).fadeOut(this.options.animateDuration,function(){a(this).remove()}):a(this.ulError).remove()},reset:function(){return this.isValid=null,this.removeErrors(),this.validatedOnce=!1,this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass),this},manageError:function(b){a(this.ulError).length||this.manageErrorContainer();var c=b.name,d=!1!==this.options.errorMessage?"custom-error-message":c,e={},f=!1!==this.options.errorMessage?this.options.errorMessage:"type"===b.name?this.Validator.messages[c][b.requirements]:"undefined"==typeof this.Validator.messages[c]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[c],b.requirements);a(this.ulError+" ."+d).length||(e[d]=f,this.addError(e))},manageErrorContainer:function(){var b=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),c=this.options.animate?this.ulTemplate.show():this.ulTemplate;return"undefined"!=typeof b?void a(b).append(c):void(this.isRadioOrCheckbox?this.$element.parent().after(c):this.$element.after(c))},addListener:function(a){for(var b in a)this.options.listeners[b]=a[b]},destroy:function(){this.$element.removeClass("parsley-validated"),this.errorClassHandler.removeClass(this.options.errorClass).removeClass(this.options.successClass),this.reset().$element.off("."+this.type).removeData(this.type)}};var d=function(a,c,d){this.initMultiple(a,c),this.inherit(a,c),this.Validator=new b(c),this.init(a,d||"ParsleyFieldMultiple")};d.prototype={constructor:d,initMultiple:function(b,c){this.element=b,this.$element=a(b),this.group=c.group||!1,this.hash=this.getName(),this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]',this.isRadioOrCheckbox=!0,this.isRadio=this.$element.is("input[type=radio]"),this.isCheckbox=this.$element.is("input[type=checkbox]"),this.errorClassHandler=c.errors.classHandler(b,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(a,b){var d=new c(a,b);for(var e in d)"undefined"==typeof this[e]&&(this[e]=d[e])},getName:function(){if(this.group)return"parsley-"+this.group;if("undefined"==typeof this.$element.attr("name"))throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !";return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio)return a(this.siblings+":checked").val()||"";if(this.isCheckbox){var b=[];return a(this.siblings+":checked").each(function(){b.push(a(this).val())}),b}},bindValidationEvents:function(){this.isValid=null,this.$element.addClass("parsley-validated"),this.$element.data("events")&&this.$element.off("."+this.type);var b=this,c=(this.options.trigger?this.options.trigger+" ":"")+(new RegExp("change","i").test(this.options.trigger)?"":"change");a(this.siblings).each(function(){a(this).on(c.split(" ").join("."+b.type+" "),!1,a.proxy(b.eventValidation,b))})}};var e=function(a,b,c){this.init(a,b,c||"parsleyForm")};e.prototype={constructor:e,init:function(b,c,d){this.type=d,this.items=[],this.$element=a(b),this.options=c;var e=this;this.$element.find(c.inputs).each(function(){e.addItem(this)}),this.$element.on("submit."+this.type,!1,a.proxy(this.validate,this))},addListener:function(a){for(var b in a)if(new RegExp("Field").test(b))for(var c=0;c<this.items.length;c++)this.items[c].addListener(a);else this.options.listeners[b]=a[b]},addItem:function(b){if(a(b).is(this.options.excluded))return!1;var c=a(b).parsley(this.options);c.setParent(this),this.items.push(c)},removeItem:function(b){for(var c=a(b).parsley(),d=0;d<this.items.length;d++)if(this.items[d].hash===c.hash)return this.items[d].destroy(),this.items.splice(d,1),!0;return!1},validate:function(a){var b=!0;this.focusedField=!1;for(var c=0;c<this.items.length;c++)"undefined"!=typeof this.items[c]&&!1===this.items[c].validate()&&(b=!1,(!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus)&&(this.focusedField=this.items[c].$element));return this.focusedField&&!b&&this.focusedField.focus(),this.options.listeners.onFormSubmit(b,a,this),b},removeErrors:function(){for(var a=0;a<this.items.length;a++)this.items[a].parsley("reset")},destroy:function(){for(var a=0;a<this.items.length;a++)this.items[a].destroy();this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var a=0;a<this.items.length;a++)this.items[a].reset()}},a.fn.parsley=function(b,f){function g(g,i){var j=a(g).data(i);if(!j){switch(i){case"parsleyForm":j=new e(g,h,"parsleyForm");break;case"parsleyField":j=new c(g,h,"parsleyField");break;case"parsleyFieldMultiple":j=new d(g,h,"parsleyFieldMultiple");break;default:return}a(g).data(i,j)}if("string"==typeof b&&"function"==typeof j[b]){var k=j[b](f);return"undefined"!=typeof k?k:a(g)}return j}var h=a.extend(!0,{},a.fn.parsley.defaults,"undefined"!=typeof window.ParsleyConfig?window.ParsleyConfig:{},b,this.data()),i=null;return a(this).is("form")?i=g(a(this),"parsleyForm"):a(this).is(h.inputs)&&!a(this).is(h.excluded)&&(i=g(a(this),a(this).is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"parsleyField")),"function"==typeof f?f():i},a.fn.parsley.Constructor=e,a.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], :disabled",trigger:!1,animate:!0,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:!1,validators:{},messages:{},validateIfUnchanged:!1,errors:{classHandler:function(){},container:function(){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(){return!1},onFormSubmit:function(){},onFieldError:function(){},onFieldSuccess:function(){}}},a(window).on("load",function(){a('[data-validate="parsley"]').each(function(){a(this).parsley()})})}(window.jQuery||window.Zepto);