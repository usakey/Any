nv.models.historicalBar=function(){function a(r){return r.each(function(a){var r=e-d.left-d.right,s=f-d.top-d.bottom,t=d3.select(this);h.domain(b||d3.extent(a[0].values.map(j).concat(l))),h.range(n?[.5*r/a[0].values.length,r*(a[0].values.length-.5)/a[0].values.length]:[0,r]),i.domain(c||d3.extent(a[0].values.map(k).concat(m))).range([s,0]),(h.domain()[0]===h.domain()[1]||i.domain()[0]===i.domain()[1])&&(singlePoint=!0),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),i.domain()[0]===i.domain()[1]&&i.domain(i.domain()[0]?[i.domain()[0]+.01*i.domain()[0],i.domain()[1]-.01*i.domain()[1]]:[-1,1]);var u=t.selectAll("g.nv-wrap.nv-bar").data([a[0].values]),v=u.enter().append("g").attr("class","nvd3 nv-wrap nv-bar"),w=v.append("defs"),x=v.append("g"),y=u.select("g");x.append("g").attr("class","nv-bars"),u.attr("transform","translate("+d.left+","+d.top+")"),t.on("click",function(a,b){q.chartClick({data:a,index:b,pos:d3.event,id:g})}),w.append("clipPath").attr("id","nv-chart-clip-path-"+g).append("rect"),u.select("#nv-chart-clip-path-"+g+" rect").attr("width",r).attr("height",s),y.attr("clip-path",o?"url(#nv-chart-clip-path-"+g+")":"");var z=u.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a});z.exit().remove();z.enter().append("rect").attr("x",0).attr("y",function(a,b){return i(Math.max(0,k(a,b)))}).attr("height",function(a,b){return Math.abs(i(k(a,b))-i(0))}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),q.elementMouseover({point:b,series:a[0],pos:[h(j(b,c)),i(k(b,c))],pointIndex:c,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),q.elementMouseout({point:b,series:a[0],pointIndex:c,seriesIndex:0,e:d3.event})}).on("click",function(a,b){q.elementClick({value:k(a,b),data:a,index:b,pos:[h(j(a,b)),i(k(a,b))],e:d3.event,id:g}),d3.event.stopPropagation()}).on("dblclick",function(a,b){q.elementDblClick({value:k(a,b),data:a,index:b,pos:[h(j(a,b)),i(k(a,b))],e:d3.event,id:g}),d3.event.stopPropagation()});z.attr("fill",function(a,b){return p(a,b)}).attr("class",function(a,b,c){return(k(a,b)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+c+"-"+b}).attr("transform",function(b,c){return"translate("+(h(j(b,c))-r/a[0].values.length*.45)+",0)"}).attr("width",r/a[0].values.length*.9),d3.transition(z).attr("y",function(a,b){return k(a,b)<0?i(0):i(0)-i(k(a,b))<1?i(0)-1:i(k(a,b))}).attr("height",function(a,b){return Math.max(Math.abs(i(k(a,b))-i(0)),1)})}),a}var b,c,d={top:0,right:0,bottom:0,left:0},e=960,f=500,g=Math.floor(1e4*Math.random()),h=d3.scale.linear(),i=d3.scale.linear(),j=function(a){return a.x},k=function(a){return a.y},l=[],m=[0],n=!1,o=!0,p=nv.utils.defaultColor(),q=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=q,a.x=function(b){return arguments.length?(j=b,a):j},a.y=function(b){return arguments.length?(k=b,a):k},a.margin=function(b){return arguments.length?(d.top="undefined"!=typeof b.top?b.top:d.top,d.right="undefined"!=typeof b.right?b.right:d.right,d.bottom="undefined"!=typeof b.bottom?b.bottom:d.bottom,d.left="undefined"!=typeof b.left?b.left:d.left,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.height=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(h=b,a):h},a.yScale=function(b){return arguments.length?(i=b,a):i},a.xDomain=function(c){return arguments.length?(b=c,a):b},a.yDomain=function(b){return arguments.length?(c=b,a):c},a.forceX=function(b){return arguments.length?(l=b,a):l},a.forceY=function(b){return arguments.length?(m=b,a):m},a.padData=function(b){return arguments.length?(n=b,a):n},a.clipEdge=function(b){return arguments.length?(o=b,a):o},a.color=function(b){return arguments.length?(p=nv.utils.getColor(b),a):p},a.id=function(b){return arguments.length?(g=b,a):g},a};