nv.models.lineWithFocusChart=function(){function a(w){return w.each(function(A){function B(a){var b=+("e"==a),c=b?1:-1,d=I/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function C(){m.empty()||m.extent(u),Q.data([m.empty()?d.domain():u]).each(function(a){var c=d(a[0])-b.range()[0],e=b.range()[1]-d(a[1]);d3.select(this).select(".left").attr("width",0>c?0:c),d3.select(this).select(".right").attr("x",d(a[1])).attr("width",0>e?0:e)})}function D(){u=m.empty()?null:m.extent(),extent=m.empty()?d.domain():m.extent(),y.brush({extent:extent,brush:m}),C();var a=M.select(".nv-focus .nv-linesWrap").datum(A.filter(function(a){return!a.disabled}).map(function(a){return{key:a.key,values:a.values.filter(function(a,b){return f.x()(a,b)>=extent[0]&&f.x()(a,b)<=extent[1]})}}));d3.transition(a).call(f),d3.transition(M.select(".nv-focus .nv-x.nv-axis")).call(h),d3.transition(M.select(".nv-focus .nv-y.nv-axis")).call(i)}var E=d3.select(this),F=this,G=(q||parseInt(E.style("width"))||960)-n.left-n.right,H=(r||parseInt(E.style("height"))||400)-n.top-n.bottom-s,I=s-o.top-o.bottom;if(a.update=function(){a(w)},a.container=this,!(A&&A.length&&A.filter(function(a){return a.values.length}).length)){var J=E.selectAll(".nv-noData").data([x]);return J.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),J.attr("x",n.left+G/2).attr("y",n.top+H/2).text(function(a){return a}),a}E.selectAll(".nv-noData").remove(),b=f.xScale(),c=f.yScale(),d=g.xScale(),e=g.yScale();var K=E.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([A]),L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),M=K.select("g");L.append("g").attr("class","nv-legendWrap");var N=L.append("g").attr("class","nv-focus");N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-linesWrap");var O=L.append("g").attr("class","nv-context");O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-linesWrap"),O.append("g").attr("class","nv-brushBackground"),O.append("g").attr("class","nv-x nv-brush"),t&&(l.width(G),M.select(".nv-legendWrap").datum(A).call(l),n.top!=l.height()&&(n.top=l.height(),H=(r||parseInt(E.style("height"))||400)-n.top-n.bottom-s),M.select(".nv-legendWrap").attr("transform","translate(0,"+-n.top+")")),K.attr("transform","translate("+n.left+","+n.top+")"),f.width(G).height(H).color(A.map(function(a,b){return a.color||p(a,b)}).filter(function(a,b){return!A[b].disabled})),g.defined(f.defined()).width(G).height(I).color(A.map(function(a,b){return a.color||p(a,b)}).filter(function(a,b){return!A[b].disabled})),M.select(".nv-context").attr("transform","translate(0,"+(H+n.bottom+o.top)+")");var P=M.select(".nv-context .nv-linesWrap").datum(A.filter(function(a){return!a.disabled}));d3.transition(P).call(g),h.scale(b).ticks(G/100).tickSize(-H,0),i.scale(c).ticks(H/36).tickSize(-G,0),M.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+H+")"),m.x(d).on("brush",D),u&&m.extent(u);var Q=M.select(".nv-brushBackground").selectAll("g").data([u||m.extent()]),R=Q.enter().append("g");R.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",I),R.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",I),gBrush=M.select(".nv-x.nv-brush").call(m),gBrush.selectAll("rect").attr("height",I),gBrush.selectAll(".resize").append("path").attr("d",B),D(),j.scale(d).ticks(G/100).tickSize(-I,0),M.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),d3.transition(M.select(".nv-context .nv-x.nv-axis")).call(j),k.scale(e).ticks(I/36).tickSize(-G,0),d3.transition(M.select(".nv-context .nv-y.nv-axis")).call(k),M.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),l.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,A.filter(function(a){return!a.disabled}).length||A.map(function(a){return a.disabled=!1,K.selectAll(".nv-series").classed("disabled",!1),a}),w.transition().call(a)}),y.on("tooltipShow",function(a){v&&z(a,F.parentNode)})}),a}var b,c,d,e,f=nv.models.line(),g=nv.models.line(),h=nv.models.axis(),i=nv.models.axis(),j=nv.models.axis(),k=nv.models.axis(),l=nv.models.legend(),m=d3.svg.brush(),n={top:30,right:30,bottom:30,left:60},o={top:0,right:30,bottom:20,left:60},p=nv.utils.defaultColor(),q=null,r=null,s=100,t=!0,u=null,v=!0,w=function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},x="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","brush");f.clipEdge(!0),g.interactive(!1),h.orient("bottom").tickPadding(5),i.orient("left"),j.orient("bottom").tickPadding(5),k.orient("left");var z=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),e=b.pos[1]+(c.offsetTop||0),g=h.tickFormat()(f.x()(b.point,b.pointIndex)),j=i.tickFormat()(f.y()(b.point,b.pointIndex)),k=w(b.series.key,g,j,b,a);nv.tooltip.show([d,e],k,null,null,c)};return f.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+n.left,a.pos[1]+n.top],y.tooltipShow(a)}),f.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),y.on("tooltipHide",function(){v&&nv.tooltip.cleanup()}),a.dispatch=y,a.legend=l,a.lines=f,a.lines2=g,a.xAxis=h,a.yAxis=i,a.x2Axis=j,a.y2Axis=k,d3.rebind(a,f,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),a.x=function(b){return arguments.length?(f.x(b),g.x(b),a):f.x},a.y=function(b){return arguments.length?(f.y(b),g.y(b),a):f.y},a.margin=function(b){return arguments.length?(n.top="undefined"!=typeof b.top?b.top:n.top,n.right="undefined"!=typeof b.right?b.right:n.right,n.bottom="undefined"!=typeof b.bottom?b.bottom:n.bottom,n.left="undefined"!=typeof b.left?b.left:n.left,a):n},a.margin2=function(b){return arguments.length?(o=b,a):o},a.width=function(b){return arguments.length?(q=b,a):q},a.height=function(b){return arguments.length?(r=b,a):r},a.height2=function(b){return arguments.length?(s=b,a):s},a.color=function(b){return arguments.length?(p=nv.utils.getColor(b),l.color(p),a):p},a.showLegend=function(b){return arguments.length?(t=b,a):t},a.tooltips=function(b){return arguments.length?(v=b,a):v},a.tooltipContent=function(b){return arguments.length?(w=b,a):w},a.interpolate=function(b){return arguments.length?(f.interpolate(b),g.interpolate(b),a):f.interpolate()},a.noData=function(b){return arguments.length?(x=b,a):x},a.xTickFormat=function(b){return arguments.length?(h.tickFormat(b),j.tickFormat(b),a):h.tickFormat()},a.yTickFormat=function(b){return arguments.length?(i.tickFormat(b),k.tickFormat(b),a):i.tickFormat()},a};