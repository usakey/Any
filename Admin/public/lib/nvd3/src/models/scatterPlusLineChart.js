nv.models.scatterPlusLineChart=function(){function a(v){return v.each(function(w){function x(){if(t)return N.select(".nv-point-paths").style("pointer-events","all"),!1;N.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);m.distortion(s).focus(a[0]),n.distortion(s).focus(a[1]),N.select(".nv-scatterWrap").datum(w.filter(function(a){return!a.disabled})).call(b),N.select(".nv-x.nv-axis").call(c),N.select(".nv-y.nv-axis").call(d),N.select(".nv-distributionX").datum(w.filter(function(a){return!a.disabled})).call(g),N.select(".nv-distributionY").datum(w.filter(function(a){return!a.disabled})).call(h)}var F=d3.select(this),G=this,H=(j||parseInt(F.style("width"))||960)-i.left-i.right,I=(k||parseInt(F.style("height"))||400)-i.top-i.bottom;if(a.update=function(){a(v)},a.container=this,!(w&&w.length&&w.filter(function(a){return a.values.length}).length)){var J=F.selectAll(".nv-noData").data([z]);return J.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),J.attr("x",i.left+H/2).attr("y",i.top+I/2).text(function(a){return a}),a}F.selectAll(".nv-noData").remove(),m=b.xScale(),n=b.yScale(),A=A||m,B=B||n;var K=F.selectAll("g.nv-wrap.nv-scatterChart").data([w]),L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()),M=L.append("g"),N=K.select("g");M.append("rect").attr("class","nvd3 nv-background"),M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis"),M.append("g").attr("class","nv-scatterWrap"),M.append("g").attr("class","nv-regressionLinesWrap"),M.append("g").attr("class","nv-distWrap"),M.append("g").attr("class","nv-legendWrap"),M.append("g").attr("class","nv-controlsWrap"),K.attr("transform","translate("+i.left+","+i.top+")"),q&&(e.width(H/2),K.select(".nv-legendWrap").datum(w).call(e),i.top!=e.height()&&(i.top=e.height(),I=(k||parseInt(F.style("height"))||400)-i.top-i.bottom),K.select(".nv-legendWrap").attr("transform","translate("+H/2+","+-i.top+")")),r&&(f.width(180).color(["#444"]),N.select(".nv-controlsWrap").datum(E).attr("transform","translate(0,"+-i.top+")").call(f)),b.width(H).height(I).color(w.map(function(a,b){return a.color||l(a,b)}).filter(function(a,b){return!w[b].disabled})),K.select(".nv-scatterWrap").datum(w.filter(function(a){return!a.disabled})).call(b),K.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");{var O=K.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});O.enter().append("g").attr("class","nv-regLines").append("line").attr("class","nv-regLine").style("stroke-opacity",0)}O.selectAll(".nv-regLines line").attr("x1",m.range()[0]).attr("x2",m.range()[1]).attr("y1",function(a){return n(m.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a){return n(m.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,c){return l(a,c)}).style("stroke-opacity",function(a){return a.disabled||"undefined"==typeof a.slope||"undefined"==typeof a.intercept?0:1}),c.scale(m).ticks(c.ticks()?c.ticks():H/100).tickSize(-I,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")").call(c),d.scale(n).ticks(d.ticks()?d.ticks():I/36).tickSize(-H,0),N.select(".nv-y.nv-axis").call(d),o&&(g.getData(b.x()).scale(m).width(H).color(w.map(function(a,b){return a.color||l(a,b)}).filter(function(a,b){return!w[b].disabled})),M.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),N.select(".nv-distributionX").attr("transform","translate(0,"+n.range()[0]+")").datum(w.filter(function(a){return!a.disabled})).call(g)),p&&(h.getData(b.y()).scale(n).width(I).color(w.map(function(a,b){return a.color||l(a,b)}).filter(function(a,b){return!w[b].disabled})),M.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),N.select(".nv-distributionY").attr("transform","translate(-"+h.size()+",0)").datum(w.filter(function(a){return!a.disabled})).call(h)),d3.fisheye&&(N.select(".nv-background").attr("width",H).attr("height",I),N.select(".nv-background").on("mousemove",x),N.select(".nv-background").on("click",function(){t=!t}),b.dispatch.on("elementClick.freezeFisheye",function(){t=!t})),f.dispatch.on("legendClick",function(e){e.disabled=!e.disabled,s=e.disabled?0:2.5,N.select(".nv-background").style("pointer-events",e.disabled?"none":"all"),N.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none"),e.disabled?(m.distortion(s).focus(0),n.distortion(s).focus(0),N.select(".nv-scatterWrap").call(b),N.select(".nv-x.nv-axis").call(c),N.select(".nv-y.nv-axis").call(d)):t=!1,a(v)}),e.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,w.filter(function(a){return!a.disabled}).length||w.map(function(a){return a.disabled=!1,K.selectAll(".nv-series").classed("disabled",!1),a}),C.disabled=w.map(function(a){return!!a.disabled}),y.stateChange(C),a(v)}),b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-I),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+g.size()),a.pos=[a.pos[0]+i.left,a.pos[1]+i.top],y.tooltipShow(a)}),y.on("tooltipShow",function(a){u&&D(a,G.parentNode)}),y.on("changeState",function(b){"undefined"!=typeof b.disabled&&(w.forEach(function(a,c){a.disabled=b.disabled[c]}),C.disabled=b.disabled),v.call(a)}),A=m.copy(),B=n.copy()}),a}var b=nv.models.scatter(),c=nv.models.axis(),d=nv.models.axis(),e=nv.models.legend(),f=nv.models.legend(),g=nv.models.distribution(),h=nv.models.distribution(),i={top:30,right:20,bottom:50,left:75},j=null,k=null,l=nv.utils.defaultColor(),m=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),n=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),o=!1,p=!1,q=!0,r=!!d3.fisheye,s=0,t=!1,u=!0,v=function(a,b){return"<strong>"+b+"</strong>"},w=function(a,b,c){return"<strong>"+c+"</strong>"},x=function(a,b,c,d){return"<h3>"+a+"</h3><p>"+d+"</p>"},y=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z="No Data Available.";b.xScale(m).yScale(n),c.orient("bottom").tickPadding(10),d.orient("left").tickPadding(10),g.axis("x"),h.axis("y");var A,B,C={},D=function(e,f){var g=e.pos[0]+(f.offsetLeft||0),h=e.pos[1]+(f.offsetTop||0),j=e.pos[0]+(f.offsetLeft||0),k=n.range()[0]+i.top+(f.offsetTop||0),l=m.range()[0]+i.left+(f.offsetLeft||0),o=e.pos[1]+(f.offsetTop||0),p=c.tickFormat()(b.x()(e.point,e.pointIndex)),q=d.tickFormat()(b.y()(e.point,e.pointIndex));null!=v&&nv.tooltip.show([j,k],v(e.series.key,p,q,e,a),"n",1,f,"x-nvtooltip"),null!=w&&nv.tooltip.show([l,o],w(e.series.key,p,q,e,a),"e",1,f,"y-nvtooltip"),null!=x&&nv.tooltip.show([g,h],x(e.series.key,p,q,e.point.tooltip,e,a),e.value<0?"n":"s",null,f)},E=[{key:"Magnify",disabled:!0}];return b.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",h.size())}),y.on("tooltipHide",function(){u&&nv.tooltip.cleanup()}),a.dispatch=y,a.scatter=b,a.legend=e,a.controls=f,a.xAxis=c,a.yAxis=d,a.distX=g,a.distY=h,d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),a.margin=function(b){return arguments.length?(i.top="undefined"!=typeof b.top?b.top:i.top,i.right="undefined"!=typeof b.right?b.right:i.right,i.bottom="undefined"!=typeof b.bottom?b.bottom:i.bottom,i.left="undefined"!=typeof b.left?b.left:i.left,a):i},a.width=function(b){return arguments.length?(j=b,a):j},a.height=function(b){return arguments.length?(k=b,a):k},a.color=function(b){return arguments.length?(l=nv.utils.getColor(b),e.color(l),g.color(l),h.color(l),a):l},a.showDistX=function(b){return arguments.length?(o=b,a):o},a.showDistY=function(b){return arguments.length?(p=b,a):p},a.showControls=function(b){return arguments.length?(r=b,a):r},a.showLegend=function(b){return arguments.length?(q=b,a):q},a.fisheye=function(b){return arguments.length?(s=b,a):s},a.tooltips=function(b){return arguments.length?(u=b,a):u},a.tooltipContent=function(b){return arguments.length?(x=b,a):x},a.tooltipXContent=function(b){return arguments.length?(v=b,a):v},a.tooltipYContent=function(b){return arguments.length?(w=b,a):w},a.state=function(b){return arguments.length?(C=b,a):C},a.noData=function(b){return arguments.length?(z=b,a):z},a};