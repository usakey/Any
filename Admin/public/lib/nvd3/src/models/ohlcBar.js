nv.models.ohlcBar=function(){function a(t){return t.each(function(a){var t=e-d.left-d.right,v=f-d.top-d.bottom,w=d3.select(this);h.domain(b||d3.extent(a[0].values.map(j).concat(p))),h.range(r?[.5*t/a[0].values.length,t*(a[0].values.length-.5)/a[0].values.length]:[0,t]),i.domain(c||[d3.min(a[0].values.map(o).concat(q)),d3.max(a[0].values.map(n).concat(q))]).range([v,0]),(h.domain()[0]===h.domain()[1]||i.domain()[0]===i.domain()[1])&&(singlePoint=!0),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),i.domain()[0]===i.domain()[1]&&i.domain(i.domain()[0]?[i.domain()[0]+.01*i.domain()[0],i.domain()[1]-.01*i.domain()[1]]:[-1,1]);var x=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),y=x.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),z=y.append("defs"),A=y.append("g"),B=x.select("g");A.append("g").attr("class","nv-ticks"),x.attr("transform","translate("+d.left+","+d.top+")"),w.on("click",function(a,b){u.chartClick({data:a,index:b,pos:d3.event,id:g})}),z.append("clipPath").attr("id","nv-chart-clip-path-"+g).append("rect"),x.select("#nv-chart-clip-path-"+g+" rect").attr("width",t).attr("height",v),B.attr("clip-path",s?"url(#nv-chart-clip-path-"+g+")":"");var C=x.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});C.exit().remove();C.enter().append("path").attr("class",function(a,b,c){return(l(a,b)>m(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}).attr("d",function(b,c){var d=t/a[0].values.length*.9;return"m0,0l0,"+(i(l(b,c))-i(n(b,c)))+"l"+-d/2+",0l"+d/2+",0l0,"+(i(o(b,c))-i(l(b,c)))+"l0,"+(i(m(b,c))-i(o(b,c)))+"l"+d/2+",0l"+-d/2+",0z"}).attr("transform",function(a,b){return"translate("+h(j(a,b))+","+i(n(a,b))+")"}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),u.elementMouseover({point:b,series:a[0],pos:[h(j(b,c)),i(k(b,c))],pointIndex:c,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),u.elementMouseout({point:b,series:a[0],pointIndex:c,seriesIndex:0,e:d3.event})}).on("click",function(a,b){u.elementClick({value:k(a,b),data:a,index:b,pos:[h(j(a,b)),i(k(a,b))],e:d3.event,id:g}),d3.event.stopPropagation()}).on("dblclick",function(a,b){u.elementDblClick({value:k(a,b),data:a,index:b,pos:[h(j(a,b)),i(k(a,b))],e:d3.event,id:g}),d3.event.stopPropagation()});C.attr("class",function(a,b,c){return(l(a,b)>m(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}),d3.transition(C).attr("transform",function(a,b){return"translate("+h(j(a,b))+","+i(n(a,b))+")"}).attr("d",function(b,c){var d=t/a[0].values.length*.9;return"m0,0l0,"+(i(l(b,c))-i(n(b,c)))+"l"+-d/2+",0l"+d/2+",0l0,"+(i(o(b,c))-i(l(b,c)))+"l0,"+(i(m(b,c))-i(o(b,c)))+"l"+d/2+",0l"+-d/2+",0z"})}),a}var b,c,d={top:0,right:0,bottom:0,left:0},e=960,f=500,g=Math.floor(1e4*Math.random()),h=d3.scale.linear(),i=d3.scale.linear(),j=function(a){return a.x},k=function(a){return a.y},l=function(a){return a.open},m=function(a){return a.close},n=function(a){return a.high},o=function(a){return a.low},p=[],q=[],r=!1,s=!0,t=nv.utils.defaultColor(),u=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=u,a.x=function(b){return arguments.length?(j=b,a):j},a.y=function(b){return arguments.length?(k=b,a):k},a.open=function(b){return arguments.length?(l=b,a):l},a.close=function(b){return arguments.length?(m=b,a):m},a.high=function(b){return arguments.length?(n=b,a):n},a.low=function(b){return arguments.length?(o=b,a):o},a.margin=function(b){return arguments.length?(d.top="undefined"!=typeof b.top?b.top:d.top,d.right="undefined"!=typeof b.right?b.right:d.right,d.bottom="undefined"!=typeof b.bottom?b.bottom:d.bottom,d.left="undefined"!=typeof b.left?b.left:d.left,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.height=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(h=b,a):h},a.yScale=function(b){return arguments.length?(i=b,a):i},a.xDomain=function(c){return arguments.length?(b=c,a):b},a.yDomain=function(b){return arguments.length?(c=b,a):c},a.forceX=function(b){return arguments.length?(p=b,a):p},a.forceY=function(b){return arguments.length?(q=b,a):q},a.padData=function(b){return arguments.length?(r=b,a):r},a.clipEdge=function(b){return arguments.length?(s=b,a):s},a.color=function(b){return arguments.length?(t=nv.utils.getColor(b),a):t},a.id=function(b){return arguments.length?(g=b,a):g},a};