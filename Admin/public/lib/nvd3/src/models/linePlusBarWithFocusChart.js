nv.models.linePlusBarWithFocusChart=function(){function a(F){return F.each(function(J){function K(a){var b=+("e"==a),c=b?1:-1,d=R/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function L(){t.empty()||t.extent(D),cb.data([t.empty()?d.domain():D]).each(function(a){var b=d(a[0])-d.range()[0],c=d.range()[1]-d(a[1]);d3.select(this).select(".left").attr("width",0>b?0:b),d3.select(this).select(".right").attr("x",d(a[1])).attr("width",0>c?0:c)})}function M(){D=t.empty()?null:t.extent(),b=t.empty()?d.domain():t.extent(),H.brush({extent:b,brush:t}),L(),k.width(P).height(Q).color(J.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!J[b].disabled&&J[b].bar})),i.width(P).height(Q).color(J.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!J[b].disabled&&!J[b].bar}));var a=Z.select(".nv-focus .nv-barsWrap").datum(T.length?T.map(function(a){return{key:a.key,values:a.values.filter(function(a,c){return k.x()(a,c)>=b[0]&&k.x()(a,c)<=b[1]})}}):[{values:[]}]),g=Z.select(".nv-focus .nv-linesWrap").datum(U[0].disabled?[{values:[]}]:U.map(function(a){return{key:a.key,values:a.values.filter(function(a,c){return i.x()(a,c)>=b[0]&&i.x()(a,c)<=b[1]})}}));c=T.length?k.xScale():i.xScale(),m.scale(c).ticks(P/100).tickSize(-Q,0),m.domain([Math.ceil(b[0]),Math.floor(b[1])]),d3.transition(Z.select(".nv-x.nv-axis")).call(m),d3.transition(a).call(k),d3.transition(g).call(i),Z.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),o.scale(e).ticks(Q/36).tickSize(-P,0),Z.select(".nv-focus .nv-y1.nv-axis").style("opacity",T.length?1:0),p.scale(f).ticks(Q/36).tickSize(T.length?0:-P,0),Z.select(".nv-focus .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+c.range()[1]+",0)"),d3.transition(Z.select(".nv-focus .nv-y1.nv-axis")).call(o),d3.transition(Z.select(".nv-focus .nv-y2.nv-axis")).call(p)}var N=d3.select(this),O=this,P=(w||parseInt(N.style("width"))||960)-u.left-u.right,Q=(x||parseInt(N.style("height"))||400)-u.top-u.bottom-y,R=y-v.top-v.bottom;if(a.update=function(){a(F)},a.container=this,!(J&&J.length&&J.filter(function(a){return a.values.length}).length)){var S=N.selectAll(".nv-noData").data([G]);return S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),S.attr("x",u.left+P/2).attr("y",u.top+Q/2).text(function(a){return a}),a}N.selectAll(".nv-noData").remove();var T=J.filter(function(a){return!a.disabled&&a.bar}),U=J.filter(function(a){return!a.bar});c=k.xScale(),d=n.scale(),e=k.yScale(),f=i.yScale(),g=l.yScale(),h=j.yScale();var V=J.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:z(a,b),y:A(a,b)}})}),W=J.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:z(a,b),y:A(a,b)}})});c.range([0,P]),d.domain(d3.extent(d3.merge(V.concat(W)),function(a){return a.x})).range([0,P]);var X=N.selectAll("g.nv-wrap.nv-linePlusBar").data([J]),Y=X.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),Z=X.select("g");Y.append("g").attr("class","nv-legendWrap");var $=Y.append("g").attr("class","nv-focus");$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y1 nv-axis"),$.append("g").attr("class","nv-y2 nv-axis"),$.append("g").attr("class","nv-barsWrap"),$.append("g").attr("class","nv-linesWrap");var _=Y.append("g").attr("class","nv-context");_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y1 nv-axis"),_.append("g").attr("class","nv-y2 nv-axis"),_.append("g").attr("class","nv-barsWrap"),_.append("g").attr("class","nv-linesWrap"),_.append("g").attr("class","nv-brushBackground"),_.append("g").attr("class","nv-x nv-brush"),C&&(s.width(P/2),Z.select(".nv-legendWrap").datum(J.map(function(a){return a.originalKey=void 0===a.originalKey?a.key:a.originalKey,a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)"),a})).call(s),u.top!=s.height()&&(u.top=s.height(),Q=(x||parseInt(N.style("height"))||400)-u.top-u.bottom-y),Z.select(".nv-legendWrap").attr("transform","translate("+P/2+","+-u.top+")")),X.attr("transform","translate("+u.left+","+u.top+")"),l.width(P).height(R).color(J.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!J[b].disabled&&J[b].bar})),j.width(P).height(R).color(J.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!J[b].disabled&&!J[b].bar}));var ab=Z.select(".nv-context .nv-barsWrap").datum(T.length?T:[{values:[]}]),bb=Z.select(".nv-context .nv-linesWrap").datum(U[0].disabled?[{values:[]}]:U);Z.select(".nv-context").attr("transform","translate(0,"+(Q+u.bottom+v.top)+")"),d3.transition(ab).call(l),d3.transition(bb).call(j),t.x(d).on("brush",M),D&&t.extent(D);var cb=Z.select(".nv-brushBackground").selectAll("g").data([D||t.extent()]),db=cb.enter().append("g");db.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",R),db.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",R);var eb=Z.select(".nv-x.nv-brush").call(t);eb.selectAll("rect").attr("height",R),eb.selectAll(".resize").append("path").attr("d",K),n.ticks(P/100).tickSize(-R,0),Z.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")"),d3.transition(Z.select(".nv-context .nv-x.nv-axis")).call(n),q.scale(g).ticks(R/36).tickSize(-P,0),Z.select(".nv-context .nv-y1.nv-axis").style("opacity",T.length?1:0).attr("transform","translate(0,"+d.range()[0]+")"),d3.transition(Z.select(".nv-context .nv-y1.nv-axis")).call(q),r.scale(h).ticks(R/36).tickSize(T.length?0:-P,0),Z.select(".nv-context .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+d.range()[1]+",0)"),d3.transition(Z.select(".nv-context .nv-y2.nv-axis")).call(r),s.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,J.filter(function(a){return!a.disabled}).length||J.map(function(a){return a.disabled=!1,X.selectAll(".nv-series").classed("disabled",!1),a}),F.call(a)}),H.on("tooltipShow",function(a){E&&I(a,O.parentNode)}),M()}),a}var b,c,d,e,f,g,h,i=nv.models.line(),j=nv.models.line(),k=nv.models.historicalBar(),l=nv.models.historicalBar(),m=nv.models.axis(),n=nv.models.axis(),o=nv.models.axis(),p=nv.models.axis(),q=nv.models.axis(),r=nv.models.axis(),s=nv.models.legend(),t=d3.svg.brush(),u={top:30,right:30,bottom:30,left:60},v={top:0,right:30,bottom:20,left:60},w=null,x=null,y=100,z=function(a){return a.x},A=function(a){return a.y},B=nv.utils.defaultColor(),C=!0,D=null,E=!0,F=function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},G="No Data Available.",H=d3.dispatch("tooltipShow","tooltipHide","brush");i.clipEdge(!0),j.interactive(!1),m.orient("bottom").tickPadding(5),o.orient("left"),p.orient("right"),n.orient("bottom").tickPadding(5),q.orient("left"),r.orient("right");var I=function(c,d){b&&(c.pointIndex+=Math.ceil(b[0]));var e=c.pos[0]+(d.offsetLeft||0),f=c.pos[1]+(d.offsetTop||0),g=m.tickFormat()(i.x()(c.point,c.pointIndex)),h=(c.series.bar?o:p).tickFormat()(i.y()(c.point,c.pointIndex)),j=F(c.series.key,g,h,c,a);nv.tooltip.show([e,f],j,c.value<0?"n":"s",null,d)};return i.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+u.left,a.pos[1]+u.top],H.tooltipShow(a)}),i.dispatch.on("elementMouseout.tooltip",function(a){H.tooltipHide(a)}),k.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+u.left,a.pos[1]+u.top],H.tooltipShow(a)}),k.dispatch.on("elementMouseout.tooltip",function(a){H.tooltipHide(a)}),H.on("tooltipHide",function(){E&&nv.tooltip.cleanup()}),a.dispatch=H,a.legend=s,a.lines=i,a.lines2=j,a.bars=k,a.bars2=l,a.xAxis=m,a.x2Axis=n,a.y1Axis=o,a.y2Axis=p,a.y3Axis=q,a.y4Axis=r,d3.rebind(a,i,"defined","size","clipVoronoi","interpolate"),a.x=function(b){return arguments.length?(z=b,i.x(b),k.x(b),a):z},a.y=function(b){return arguments.length?(A=b,i.y(b),k.y(b),a):A},a.margin=function(b){return arguments.length?(u.top="undefined"!=typeof b.top?b.top:u.top,u.right="undefined"!=typeof b.right?b.right:u.right,u.bottom="undefined"!=typeof b.bottom?b.bottom:u.bottom,u.left="undefined"!=typeof b.left?b.left:u.left,a):u},a.width=function(b){return arguments.length?(w=b,a):w},a.height=function(b){return arguments.length?(x=b,a):x},a.color=function(b){return arguments.length?(B=nv.utils.getColor(b),s.color(B),a):B},a.showLegend=function(b){return arguments.length?(C=b,a):C},a.tooltips=function(b){return arguments.length?(E=b,a):E},a.tooltipContent=function(b){return arguments.length?(F=b,a):F},a.noData=function(b){return arguments.length?(G=b,a):G},a};