var Rickshaw={namespace:function(a){for(var b=a.split("."),c=Rickshaw,d=1,e=b.length;e>d;d++){var f=b[d];c[f]=c[f]||{},c=c[f]}return c},keys:function(a){var b=[];for(var c in a)b.push(c);return b},extend:function(a,b){for(var c in b)a[c]=b[c];return a}};if("undefined"!=typeof module&&module.exports){var d3=require("d3");module.exports=Rickshaw}!function(a){function b(a){return l.call(a)===s}function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a){if(e(a)!==r)throw new TypeError;var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function e(a){switch(a){case null:return m;case void 0:return n}var b=typeof a;switch(b){case"boolean":return o;case"number":return p;case"string":return q}return r}function f(a){return"undefined"==typeof a}function g(a){var b=a.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=b.length||b[0]?b:[]}function h(a,b){var c=a;return function(){var a=i([k(c,this)],arguments);return b.apply(this,a)}}function i(a,b){for(var c=a.length,d=b.length;d--;)a[c+d]=b[d];return a}function j(a,b){return a=t.call(a,0),i(a,b)}function k(a,b){if(arguments.length<2&&f(arguments[0]))return this;var c=a,d=t.call(arguments,2);return function(){var a=j(d,arguments);return c.apply(b,a)}}var l=Object.prototype.toString,m="Null",n="Undefined",o="Boolean",p="Number",q="String",r="Object",s="[object Function]",t=Array.prototype.slice,u=function(){},v=function(){function a(){}function e(){function d(){this.initialize.apply(this,arguments)}var e=null,f=[].slice.apply(arguments);if(b(f[0])&&(e=f.shift()),c(d,v.Methods),d.superclass=e,d.subclasses=[],e){a.prototype=e.prototype,d.prototype=new a;try{e.subclasses.push(d)}catch(g){}}for(var h=0,i=f.length;i>h;h++)d.addMethods(f[h]);return d.prototype.initialize||(d.prototype.initialize=u),d.prototype.constructor=d,d}function f(a){var c=this.superclass&&this.superclass.prototype,e=d(a);i&&(a.toString!=Object.prototype.toString&&e.push("toString"),a.valueOf!=Object.prototype.valueOf&&e.push("valueOf"));for(var f=0,j=e.length;j>f;f++){var l=e[f],m=a[l];if(c&&b(m)&&"$super"==g(m)[0]){var n=m;m=h(function(a){return function(){return c[a].apply(this,arguments)}}(l),n),m.valueOf=k(n.valueOf,n),m.toString=k(n.toString,n)}this.prototype[l]=m}return this}var i=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:e,Methods:{addMethods:f}}}();a.exports?a.exports.Class=v:a.Class=v}(Rickshaw),Rickshaw.namespace("Rickshaw.Compat.ClassList"),Rickshaw.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(a){"use strict";var b="classList",c="prototype",d=(a.HTMLElement||a.Element)[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.className),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.className=this.toString()}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(a){a+="",-1===i(this,a)&&(this.push(a),this._updateClassName())},k.remove=function(a){a+="";var b=i(this,a);-1!==b&&(this.splice(b,1),this._updateClassName())},k.toggle=function(a){a+="",-1===i(this,a)?this.add(a):this.remove(a)},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new Rickshaw.Compat.ClassList,Rickshaw.namespace("Rickshaw.Graph"),Rickshaw.Graph=function(a){if(!a.element)throw"Rickshaw.Graph needs a reference to an element";this.element=a.element,this.series=a.series,this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0},Rickshaw.keys(this.defaults).forEach(function(b){this[b]=a[b]||this.defaults[b]},this),this.window={},this.updateCallbacks=[];var b=this;this.initialize=function(a){this.validateSeries(a.series),this.series.active=function(){return b.series.filter(function(a){return!a.disabled})},this.setSize({width:a.width,height:a.height}),this.element.classList.add("rickshaw_graph"),this.vis=d3.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height);var c=[Rickshaw.Graph.Renderer.Stack,Rickshaw.Graph.Renderer.Line,Rickshaw.Graph.Renderer.Bar,Rickshaw.Graph.Renderer.Area,Rickshaw.Graph.Renderer.ScatterPlot];c.forEach(function(a){a&&b.registerRenderer(new a({graph:b}))}),this.setRenderer(a.renderer||"stack",a),this.discoverRange()},this.validateSeries=function(a){if(!(a instanceof Array||a instanceof Rickshaw.Series)){var b=Object.prototype.toString.apply(a);throw"series is not an array: "+b}a.forEach(function(a){if(!(a instanceof Object))throw"series element is not an object: "+a;if(!a.data)throw"series has no data: "+JSON.stringify(a);if(!(a.data instanceof Array))throw"series data is not an array: "+JSON.stringify(a.data);var b=a.data[0].x,c=a.data[0].y;if("number"!=typeof b||"number"!=typeof c&&null!==c)throw"x and y properties of points should be numbers instead of "+typeof b+" and "+typeof c},this)},this.dataDomain=function(){var a=this.series[0].data;return[a[0].x,a.slice(-1).shift().x]},this.discoverRange=function(){var a=this.renderer.domain();this.x=d3.scale.linear().domain(a.x).range([0,this.width]),this.y=d3.scale.linear().domain(a.y).range([this.height,0]),this.y.magnitude=d3.scale.linear().domain([a.y[0]-a.y[0],a.y[1]-a.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(a){a()})},this.update=this.render,this.stackData=function(){var a=this.series.active().map(function(a){return a.data}).map(function(a){return a.filter(function(a){return this._slice(a)},this)},this);this.stackData.hooks.data.forEach(function(c){a=c.f.apply(b,[a])});var c;if(!this.renderer.unstack){this._validateStackable();var d=d3.layout.stack();d.offset(b.offset),c=d(a)}c=c||a,this.stackData.hooks.after.forEach(function(d){c=d.f.apply(b,[a])});var e=0;return this.series.forEach(function(a){a.disabled||(a.stack=c[e++])}),this.stackedData=c,c},this._validateStackable=function(){var a,b=this.series;b.forEach(function(b){if(a=a||b.data.length,a&&b.data.length!=a)throw"stacked series cannot have differing numbers of points: "+a+" vs "+b.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(a){if(this.window.xMin||this.window.xMax){var b=!0;return this.window.xMin&&a.x<this.window.xMin&&(b=!1),this.window.xMax&&a.x>this.window.xMax&&(b=!1),b}return!0},this.onUpdate=function(a){this.updateCallbacks.push(a)},this.registerRenderer=function(a){this._renderers=this._renderers||{},this._renderers[a.name]=a},this.configure=function(a){(a.width||a.height)&&this.setSize(a),Rickshaw.keys(this.defaults).forEach(function(b){this[b]=b in a?a[b]:b in this?this[b]:this.defaults[b]},this),this.setRenderer(a.renderer||this.renderer.name,a)},this.setRenderer=function(a,b){if(!this._renderers[a])throw"couldn't find renderer "+a;this.renderer=this._renderers[a],"object"==typeof b&&this.renderer.configure(b)},this.setSize=function(a){if(a=a||{},void 0!==typeof window)var b=window.getComputedStyle(this.element,null),c=parseInt(b.getPropertyValue("width")),d=parseInt(b.getPropertyValue("height"));this.width=a.width||c||400,this.height=a.height||d||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(a)},Rickshaw.namespace("Rickshaw.Fixtures.Color"),Rickshaw.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},Rickshaw.namespace("Rickshaw.Fixtures.RandomData"),Rickshaw.Fixtures.RandomData=function(a){a=a||1;var b=200,c=Math.floor((new Date).getTime()/1e3);this.addData=function(d){var e=100*Math.random()+15+b,f=d[0].length,g=1;d.forEach(function(b){var d=20*Math.random(),h=e/25+g++ +15*(Math.cos(f*g*11/960)+2)+7*(Math.cos(f/7)+2)+1*(Math.cos(f/17)+2);b.push({x:f*a+c,y:h+d})}),b=.85*e}},Rickshaw.namespace("Rickshaw.Fixtures.Time"),Rickshaw.Fixtures.Time=function(){var a=(60*(new Date).getTimezoneOffset(),this);this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(a){return 10*parseInt(a.getUTCFullYear()/10)}},{name:"year",seconds:31557600,formatter:function(a){return a.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(b){return a.months[b.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(b){return a.formatDate(b)}},{name:"day",seconds:86400,formatter:function(a){return a.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(b){return a.formatTime(b)}},{name:"hour",seconds:3600,formatter:function(b){return a.formatTime(b)}},{name:"15 minute",seconds:900,formatter:function(b){return a.formatTime(b)}},{name:"minute",seconds:60,formatter:function(a){return a.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(a){return a.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(a){return a.getUTCSeconds()+"s"}}],this.unit=function(a){return this.units.filter(function(b){return a==b.name}).shift()},this.formatDate=function(a){return a.toUTCString().match(/, (\w+ \w+ \w+)/)[1]},this.formatTime=function(a){return a.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(a,b){if("month"==b.name){var c=new Date(1e3*(a+b.seconds-1)),d=new Date(0);return d.setUTCFullYear(c.getUTCFullYear()),d.setUTCMonth(c.getUTCMonth()),d.setUTCDate(1),d.setUTCHours(0),d.setUTCMinutes(0),d.setUTCSeconds(0),d.setUTCMilliseconds(0),d.getTime()/1e3}if("year"==b.name){var c=new Date(1e3*(a+b.seconds-1)),d=new Date(0);return d.setUTCFullYear(c.getUTCFullYear()),d.setUTCMonth(0),d.setUTCDate(1),d.setUTCHours(0),d.setUTCMinutes(0),d.setUTCSeconds(0),d.setUTCMilliseconds(0),d.getTime()/1e3}return Math.ceil(a/b.seconds)*b.seconds}},Rickshaw.namespace("Rickshaw.Fixtures.Number"),Rickshaw.Fixtures.Number.formatKMBT=function(a){return abs_y=Math.abs(a),abs_y>=1e12?a/1e12+"T":abs_y>=1e9?a/1e9+"B":abs_y>=1e6?a/1e6+"M":abs_y>=1e3?a/1e3+"K":1>abs_y&&a>0?a.toFixed(2):0==abs_y?"":a},Rickshaw.Fixtures.Number.formatBase1024KMGTP=function(a){return abs_y=Math.abs(a),abs_y>=0x4000000000000?a/0x4000000000000+"P":abs_y>=1099511627776?a/1099511627776+"T":abs_y>=1073741824?a/1073741824+"G":abs_y>=1048576?a/1048576+"M":abs_y>=1024?a/1024+"K":1>abs_y&&a>0?a.toFixed(2):0==abs_y?"":a},Rickshaw.namespace("Rickshaw.Color.Palette"),Rickshaw.Color.Palette=function(a){var b=new Rickshaw.Fixtures.Color;if(a=a||{},this.schemes={},this.scheme=b.schemes[a.scheme]||a.scheme||b.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,a.interpolatedStopCount){var c,d,e=this.scheme.length-1,f=[];for(c=0;e>c;c++){f.push(this.scheme[c]);var g=d3.interpolateHsl(this.scheme[c],this.scheme[c+1]);for(d=1;d<a.interpolatedStopCount;d++)f.push(g(1/a.interpolatedStopCount*d))}f.push(this.scheme[this.scheme.length-1]),this.scheme=f}this.rotateCount=this.scheme.length,this.color=function(a){return this.scheme[a]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var a;return this.generatorIndex==2*this.rotateCount-1?(a=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(a=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(a),a}}},Rickshaw.namespace("Rickshaw.Graph.Ajax"),Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(a){this.dataURL=a.dataURL,this.onData=a.onData||function(a){return a},this.onComplete=a.onComplete||function(){},this.onError=a.onError||function(){},this.args=a,this.request()},request:function(){$.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(a){a=this.onData(a),this.args.series=this._splice({data:a,series:this.args.series}),this.graph=this.graph||new Rickshaw.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(a){var b=a.data,c=a.series;return a.series?(c.forEach(function(a){var c=a.key||a.name;if(!c)throw"series needs a key or a name";b.forEach(function(b){var d=b.key||b.name;if(!d)throw"data needs a key or a name";if(c==d){var e=["color","name","data"];e.forEach(function(c){b[c]&&(a[c]=b[c])})}})}),c):b}}),Rickshaw.namespace("Rickshaw.Graph.Annotate"),Rickshaw.Graph.Annotate=function(a){this.graph=a.graph;this.elements={timeline:a.element};var b=this;this.data={},this.elements.timeline.classList.add("rickshaw_annotation_timeline"),this.add=function(a,c,d){b.data[a]=b.data[a]||{boxes:[]},b.data[a].boxes.push({content:c,end:d})},this.update=function(){Rickshaw.keys(b.data).forEach(function(a){var c=b.data[a],d=b.graph.x(a);if(0>d||d>b.graph.x.range()[1])return c.element&&(c.line.classList.add("offscreen"),c.element.style.display="none"),void c.boxes.forEach(function(a){a.rangeElement&&a.rangeElement.classList.add("offscreen")});if(!c.element){var e=c.element=document.createElement("div");e.classList.add("annotation"),this.elements.timeline.appendChild(e),e.addEventListener("click",function(){e.classList.toggle("active"),c.line.classList.toggle("active"),c.boxes.forEach(function(a){a.rangeElement&&a.rangeElement.classList.toggle("active")})},!1)}c.element.style.left=d+"px",c.element.style.display="block",c.boxes.forEach(function(a){var e=a.element;if(e||(e=a.element=document.createElement("div"),e.classList.add("content"),e.innerHTML=a.content,c.element.appendChild(e),c.line=document.createElement("div"),c.line.classList.add("annotation_line"),b.graph.element.appendChild(c.line),a.end&&(a.rangeElement=document.createElement("div"),a.rangeElement.classList.add("annotation_range"),b.graph.element.appendChild(a.rangeElement))),a.end){var f=d,g=Math.min(b.graph.x(a.end),b.graph.x.range()[1]);f>g&&(g=d,f=Math.max(b.graph.x(a.end),b.graph.x.range()[0]));var h=g-f;a.rangeElement.style.left=f+"px",a.rangeElement.style.width=h+"px",a.rangeElement.classList.remove("offscreen")}c.line.classList.remove("offscreen"),c.line.style.left=d+"px"})},this)},this.graph.onUpdate(function(){b.update()})},Rickshaw.namespace("Rickshaw.Graph.Axis.Time"),Rickshaw.Graph.Axis.Time=function(a){var b=this;this.graph=a.graph,this.elements=[],this.ticksTreatment=a.ticksTreatment||"plain",this.fixedTimeUnit=a.timeUnit;var c=new Rickshaw.Fixtures.Time;this.appropriateTimeUnit=function(){var a,b=c.units,d=this.graph.x.domain(),e=d[1]-d[0];return b.forEach(function(b){Math.floor(e/b.seconds)>=2&&(a=a||b)}),a||c.units[c.units.length-1]},this.tickOffsets=function(){for(var a=this.graph.x.domain(),b=this.fixedTimeUnit||this.appropriateTimeUnit(),d=Math.ceil((a[1]-a[0])/b.seconds),e=a[0],f=[],g=0;d>g;g++){var h=c.ceil(e,b);e=h+b.seconds/2,f.push({value:h,unit:b})}return f},this.render=function(){this.elements.forEach(function(a){a.parentNode.removeChild(a)}),this.elements=[];var a=this.tickOffsets();a.forEach(function(a){if(!(b.graph.x(a.value)>b.graph.x.range()[1])){var c=document.createElement("div");c.style.left=b.graph.x(a.value)+"px",c.classList.add("x_tick"),c.classList.add(b.ticksTreatment);var d=document.createElement("div");d.classList.add("title"),d.innerHTML=a.unit.formatter(new Date(1e3*a.value)),c.appendChild(d),b.graph.element.appendChild(c),b.elements.push(c)}})},this.graph.onUpdate(function(){b.render()})},Rickshaw.namespace("Rickshaw.Graph.Axis.X"),Rickshaw.Graph.Axis.X=function(a){var b=this,c=.1;this.initialize=function(a){this.graph=a.graph,this.orientation=a.orientation||"top";var c=a.pixelsPerTick||75;this.ticks=a.ticks||Math.floor(this.graph.width/c),this.tickSize=a.tickSize||4,this.ticksTreatment=a.ticksTreatment||"plain",a.element?(this.element=a.element,this._discoverSize(a.element,a),this.vis=d3.select(a.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:a.width,height:a.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){b.render()})},this.setSize=function(a){if(a=a||{},this.element){this._discoverSize(this.element.parentNode,a),this.vis.attr("height",this.height).attr("width",this.width*(1+c));var b=Math.floor(this.width*c/2);this.element.style.left=-1*b+"px"}},this.render=function(){this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var b=d3.svg.axis().scale(this.graph.x).orient(this.orientation);b.tickFormat(a.tickFormat||function(a){return a});var d=Math.floor(this.width*c/2)||0;if("top"==this.orientation)var e=this.height||this.graph.height,f="translate("+d+","+e+")";else var f="translate("+d+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",f).call(b.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var g=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(b.ticks(this.ticks).tickSubdivide(0).tickSize(g)),this._renderHeight=this.graph.height},this._discoverSize=function(a,b){if("undefined"!=typeof window){var d=window.getComputedStyle(a,null),e=parseInt(d.getPropertyValue("height"));if(!b.auto)var f=parseInt(d.getPropertyValue("width"))}this.width=(b.width||f||this.graph.width)*(1+c),this.height=b.height||e||40},this.initialize(a)},Rickshaw.namespace("Rickshaw.Graph.Axis.Y"),Rickshaw.Graph.Axis.Y=function(a){var b=this,c=.1;this.initialize=function(a){this.graph=a.graph,this.orientation=a.orientation||"right";var c=a.pixelsPerTick||75;this.ticks=a.ticks||Math.floor(this.graph.height/c),this.tickSize=a.tickSize||4,this.ticksTreatment=a.ticksTreatment||"plain",a.element?(this.element=a.element,this.vis=d3.select(a.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:a.width,height:a.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){b.render()})},this.setSize=function(a){if(a=a||{},this.element){if("undefined"!=typeof window){var b=window.getComputedStyle(this.element.parentNode,null),d=parseInt(b.getPropertyValue("width"));if(!a.auto)var e=parseInt(b.getPropertyValue("height"))}this.width=a.width||d||this.graph.width*c,this.height=a.height||e||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+c));var f=this.height*c;this.element.style.top=-1*f+"px"}},this.render=function(){this.graph.height!==this._renderHeight&&this.setSize({auto:!0});var b=d3.svg.axis().scale(this.graph.y).orient(this.orientation);if(b.tickFormat(a.tickFormat||function(a){return a}),"left"==this.orientation)var d=this.height*c,e="translate("+this.width+", "+d+")";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",e).call(b.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var f=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(b.ticks(this.ticks).tickSubdivide(0).tickSize(f)),this._renderHeight=this.graph.height},this.initialize(a)},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),Rickshaw.Graph.Behavior.Series.Highlight=function(a){this.graph=a.graph,this.legend=a.legend;var b=this,c={},d=null;this.addHighlightEvents=function(a){a.element.addEventListener("mouseover",function(){d||(d=a,b.legend.lines.forEach(function(d,e){if(a!==d)c[d.series.name]=c[d.series.name]||d.series.color,d.series.color=d3.interpolateRgb(d.series.color,d3.rgb("#d8d8d8"))(.8).toString();else if(e>0&&b.graph.renderer.unstack){var f=b.graph.series.length-e-1;d.originalIndex=f;var g=b.graph.series.splice(f,1)[0];b.graph.series.push(g)}}),b.graph.update())},!1),a.element.addEventListener("mouseout",function(){d&&(d=null,b.legend.lines.forEach(function(d){if(a===d&&d.hasOwnProperty("originalIndex")){var e=b.graph.series.pop();b.graph.series.splice(d.originalIndex,0,e),delete d.originalIndex}c[d.series.name]&&(d.series.color=c[d.series.name])}),b.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(a){b.addHighlightEvents(a)})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order"),Rickshaw.Graph.Behavior.Series.Order=function(a){this.graph=a.graph,this.legend=a.legend;var b=this;$(function(){$(b.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(){var a=[];$(b.legend.list).find("li").each(function(b,c){c.series&&a.push(c.series)});for(var c=b.graph.series.length-1;c>=0;c--)b.graph.series[c]=a.shift();b.graph.update()}}),$(b.legend.list).disableSelection()}),this.graph.onUpdate(function(){var a=window.getComputedStyle(b.legend.element).height;b.legend.element.style.height=a})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),Rickshaw.Graph.Behavior.Series.Toggle=function(a){this.graph=a.graph,this.legend=a.legend;var b=this;this.addAnchor=function(a){var c=document.createElement("a");c.innerHTML="&#10004;",c.classList.add("action"),a.element.insertBefore(c,a.element.firstChild),c.onclick=function(){a.series.disabled?(a.series.enable(),a.element.classList.remove("disabled")):(a.series.disable(),a.element.classList.add("disabled"))};var d=a.element.getElementsByTagName("span")[0];d.onclick=function(){var c=a.series.disabled;if(!c)for(var d=0;d<b.legend.lines.length;d++){var e=b.legend.lines[d];if(a.series===e.series);else if(!e.series.disabled){c=!0;break}}c?(a.series.enable(),a.element.classList.remove("disabled"),b.legend.lines.forEach(function(b){a.series===b.series||(b.series.disable(),b.element.classList.add("disabled"))})):b.legend.lines.forEach(function(a){a.series.enable(),a.element.classList.remove("disabled")})}},this.legend&&($(this.legend.list).sortable({start:function(a,b){b.item.bind("no.onclick",function(a){a.preventDefault()})},stop:function(a,b){setTimeout(function(){b.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(a){b.addAnchor(a)})),this._addBehavior=function(){this.graph.series.forEach(function(a){a.disable=function(){if(b.graph.series.length<=1)throw"only one series left";a.disabled=!0,b.graph.update()},a.enable=function(){a.disabled=!1,b.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},Rickshaw.namespace("Rickshaw.Graph.HoverDetail"),Rickshaw.Graph.HoverDetail=Rickshaw.Class.create({initialize:function(a){var b=this.graph=a.graph;this.xFormatter=a.xFormatter||function(a){return new Date(1e3*a).toUTCString()},this.yFormatter=a.yFormatter||function(a){return null===a?a:a.toFixed(2)};var c=this.element=document.createElement("div");c.className="detail",this.visible=!0,b.element.appendChild(c),this.lastEvent=null,this._addListeners(),this.onShow=a.onShow,this.onHide=a.onHide,this.onRender=a.onRender,this.formatter=a.formatter||this.formatter},formatter:function(a,b,c,d,e){return a.name+":&nbsp;"+e},update:function(a){if(a=a||this.lastEvent,a&&(this.lastEvent=a,a.target.nodeName.match(/^(path|svg|rect)$/))){var b,c=this.graph,d=a.offsetX||a.layerX,e=a.offsetY||a.layerY,f=0,g=[];this.graph.series.active().forEach(function(a){for(var h=this.graph.stackedData[f++],i=c.x.invert(d),j=d3.scale.linear().domain([h[0].x,h.slice(-1)[0].x]).range([0,h.length-1]),k=Math.round(j(i)),l=Math.min(k||0,h.length-1),m=k;m<h.length-1&&(h[m]&&h[m+1]);){if(h[m].x<=i&&h[m+1].x>i){l=m;break}h[m+1].x<=i?m++:m--}0>l&&(l=0);var n=h[l],o=Math.sqrt(Math.pow(Math.abs(c.x(n.x)-d),2)+Math.pow(Math.abs(c.y(n.y+n.y0)-e),2)),p=a.xFormatter||this.xFormatter,q=a.yFormatter||this.yFormatter,r={formattedXValue:p(n.x),formattedYValue:q(n.y),series:a,value:n,distance:o,order:f,name:a.name};(!b||o<b.distance)&&(b=r),g.push(r)},this),b.active=!0;var h=b.value.x,i=b.formattedXValue;this.element.innerHTML="",this.element.style.left=c.x(h)+"px",this.visible&&this.render({points:g,detail:g,mouseX:d,mouseY:e,formattedXValue:i,domainX:h})}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(a){var b=this.graph,c=a.points,d=c.filter(function(a){return a.active}).shift();if(null!==d.value.y){var e=this.xFormatter(d.value.x),f=this.yFormatter(d.value.y);this.element.innerHTML="",this.element.style.left=b.x(d.value.x)+"px";var g=document.createElement("div");g.className="x_label",g.innerHTML=e,this.element.appendChild(g);var h=document.createElement("div");h.className="item",h.innerHTML=this.formatter(d.series,d.value.x,d.value.y,e,f,d),h.style.top=this.graph.y(d.value.y0+d.value.y)+"px",this.element.appendChild(h);var i=document.createElement("div");i.className="dot",i.style.top=h.style.top,i.style.borderColor=d.series.color,this.element.appendChild(i),d.active&&(h.className="item active",i.className="dot active"),this.show(),"function"==typeof this.onRender&&this.onRender(a)}},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(a){this.visible=!0,this.update(a)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(a){!a.relatedTarget||a.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),Rickshaw.namespace("Rickshaw.Graph.JSONP"),Rickshaw.Graph.JSONP=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){$.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),Rickshaw.namespace("Rickshaw.Graph.Legend"),Rickshaw.Graph.Legend=function(a){var b=this.element=a.element,c=this.graph=a.graph,d=this;b.classList.add("rickshaw_legend");var e=this.list=document.createElement("ul");b.appendChild(e);var f=c.series.map(function(a){return a});a.naturalOrder||(f=f.reverse()),this.lines=[],this.addLine=function(a){var b=document.createElement("li");b.className="line",a.disabled&&(b.className+=" disabled");var c=document.createElement("div");c.className="swatch",c.style.backgroundColor=a.color,b.appendChild(c);var f=document.createElement("span");f.className="label",f.innerHTML=a.name,b.appendChild(f),e.appendChild(b),b.series=a,a.noLegend&&(b.style.display="none");var g={element:b,series:a};d.shelving&&(d.shelving.addAnchor(g),d.shelving.updateBehaviour()),d.highlighter&&d.highlighter.addHighlightEvents(g),d.lines.push(g)},f.forEach(function(a){d.addLine(a)}),c.onUpdate(function(){})},Rickshaw.namespace("Rickshaw.Graph.RangeSlider"),Rickshaw.Graph.RangeSlider=function(a){var b=this.element=a.element,c=this.graph=a.graph;$(function(){$(b).slider({range:!0,min:c.dataDomain()[0],max:c.dataDomain()[1],values:[c.dataDomain()[0],c.dataDomain()[1]],slide:function(a,b){c.window.xMin=b.values[0],c.window.xMax=b.values[1],c.update(),c.dataDomain()[0]==b.values[0]&&(c.window.xMin=void 0),c.dataDomain()[1]==b.values[1]&&(c.window.xMax=void 0)}})}),b[0].style.width=c.width+"px",c.onUpdate(function(){var a=$(b).slider("option","values");$(b).slider("option","min",c.dataDomain()[0]),$(b).slider("option","max",c.dataDomain()[1]),void 0==c.window.xMin&&(a[0]=c.dataDomain()[0]),void 0==c.window.xMax&&(a[1]=c.dataDomain()[1]),$(b).slider("option","values",a)})},Rickshaw.namespace("Rickshaw.Graph.Renderer"),Rickshaw.Graph.Renderer=Rickshaw.Class.create({initialize:function(a){this.graph=a.graph,this.tension=a.tension||this.tension,this.graph.unstacker=this.graph.unstacker||new Rickshaw.Graph.Unstacker({graph:this.graph}),this.configure(a)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(){var a=this.graph.stackedData||this.graph.stackData(),b=a[0][0],c=b.x,d=b.x,e=b.y+b.y0,f=b.y+b.y0;return a.forEach(function(a){a.forEach(function(a){if(void 0!=a.y){var b=a.y+a.y0;e>b&&(e=b),b>f&&(f=b)}}),a[0].x<c&&(c=a[0].x),a[a.length-1].x>d&&(d=a[a.length-1].x)}),c-=(d-c)*this.padding.left,d+=(d-c)*this.padding.right,e="auto"===this.graph.min?e:this.graph.min||0,f=void 0===this.graph.max?f:this.graph.max,("auto"===this.graph.min||0>e)&&(e-=(f-e)*this.padding.bottom),void 0===this.graph.max&&(f+=(f-e)*this.padding.top),{x:[c,d],y:[e,f]}},render:function(){var a=this.graph;a.vis.selectAll("*").remove();var b=a.vis.selectAll("path").data(this.graph.stackedData).enter().append("svg:path").attr("d",this.seriesPathFactory()),c=0;a.series.forEach(function(a){a.disabled||(a.path=b[0][c++],this._styleSeries(a))},this)},_styleSeries:function(a){var b=this.fill?a.color:"none",c=this.stroke?a.color:"none";a.path.setAttribute("fill",b),a.path.setAttribute("stroke",c),a.path.setAttribute("stroke-width",this.strokeWidth),a.path.setAttribute("class",a.className)},configure:function(a){a=a||{},Rickshaw.keys(this.defaults()).forEach(function(b){return a.hasOwnProperty(b)?void("object"==typeof this.defaults()[b]?Rickshaw.keys(this.defaults()[b]).forEach(function(c){this[b][c]=void 0!==a[b][c]?a[b][c]:void 0!==this[b][c]?this[b][c]:this.defaults()[b][c]},this):this[b]=void 0!==a[b]?a[b]:void 0!==this[b]?this[b]:void 0!==this.graph[b]?this.graph[b]:this.defaults()[b]):void(this[b]=this[b]||this.graph[b]||this.defaults()[b])},this)},setStrokeWidth:function(a){void 0!==a&&(this.strokeWidth=a)},setTension:function(a){void 0!==a&&(this.tension=a)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Line"),Rickshaw.Graph.Renderer.Line=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"line",defaults:function(a){return Rickshaw.extend(a(),{unstack:!0,fill:!1,stroke:!0})
},seriesPathFactory:function(){var a=this.graph,b=d3.svg.line().x(function(b){return a.x(b.x)}).y(function(b){return a.y(b.y)}).interpolate(this.graph.interpolation).tension(this.tension);return b.defined&&b.defined(function(a){return null!==a.y}),b}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack"),Rickshaw.Graph.Renderer.Stack=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"stack",defaults:function(a){return Rickshaw.extend(a(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var a=this.graph,b=d3.svg.area().x(function(b){return a.x(b.x)}).y0(function(b){return a.y(b.y0)}).y1(function(b){return a.y(b.y+b.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return b.defined&&b.defined(function(a){return null!==a.y}),b}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar"),Rickshaw.Graph.Renderer.Bar=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"bar",defaults:function(a){var b=Rickshaw.extend(a(),{gapSize:.05,unstack:!1});return delete b.tension,b},initialize:function(a,b){b=b||{},this.gapSize=b.gapSize||this.gapSize,a(b)},domain:function(a){var b=a(),c=this._frequentInterval();return b.x[1]+=parseInt(c.magnitude),b},barWidth:function(){var a=this.graph.stackedData||this.graph.stackData(),b=a.slice(-1).shift(),c=this._frequentInterval(),d=this.graph.x(b[0].x+c.magnitude*(1-this.gapSize));return d},render:function(){var a=this.graph;a.vis.selectAll("*").remove();var b=this.barWidth(),c=0,d=a.series.filter(function(a){return!a.disabled}).length,e=this.unstack?b/d:b,f=function(b){var c=[1,0,0,b.y<0?-1:1,0,b.y<0?2*a.y.magnitude(Math.abs(b.y)):0];return"matrix("+c.join(",")+")"};a.series.forEach(function(b){if(!b.disabled){var d=a.vis.selectAll("path").data(b.stack.filter(function(a){return null!==a.y})).enter().append("svg:rect").attr("x",function(b){return a.x(b.x)+c}).attr("y",function(b){return a.y(b.y0+Math.abs(b.y))*(b.y<0?-1:1)}).attr("width",e).attr("height",function(b){return a.y.magnitude(Math.abs(b.y))}).attr("transform",f);Array.prototype.forEach.call(d[0],function(a){a.setAttribute("fill",b.color)}),this.unstack&&(c+=e)}},this)},_frequentInterval:function(){for(var a=this.graph.stackedData||this.graph.stackData(),b=a.slice(-1).shift(),c={},d=0;d<b.length-1;d++){var e=b[d+1].x-b[d].x;c[e]=c[e]||0,c[e]++}var f={count:0};return Rickshaw.keys(c).forEach(function(a){f.count<c[a]&&(f={count:c[a],magnitude:a})}),this._frequentInterval=function(){return f},f}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Area"),Rickshaw.Graph.Renderer.Area=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"area",defaults:function(a){return Rickshaw.extend(a(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var a=this.graph,b=d3.svg.area().x(function(b){return a.x(b.x)}).y0(function(b){return a.y(b.y0)}).y1(function(b){return a.y(b.y+b.y0)}).interpolate(a.interpolation).tension(this.tension);return b.defined&&b.defined(function(a){return null!==a.y}),b},seriesStrokeFactory:function(){var a=this.graph,b=d3.svg.line().x(function(b){return a.x(b.x)}).y(function(b){return a.y(b.y+b.y0)}).interpolate(a.interpolation).tension(this.tension);return b.defined&&b.defined(function(a){return null!==a.y}),b},render:function(){var a=this.graph;a.vis.selectAll("*").remove();var b=this.unstack?"append":"insert",c=a.vis.selectAll("path").data(this.graph.stackedData).enter()[b]("svg:g","g");c.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&c.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var d=0;a.series.forEach(function(a){a.disabled||(a.path=c[0][d++],this._styleSeries(a))},this)},_styleSeries:function(a){a.path&&(d3.select(a.path).select(".area").attr("fill",a.color),this.stroke&&d3.select(a.path).select(".line").attr("fill","none").attr("stroke",a.stroke||d3.interpolateRgb(a.color,"black")(.125)).attr("stroke-width",this.strokeWidth),a.className&&a.path.setAttribute("class",a.className))}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),Rickshaw.Graph.Renderer.ScatterPlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"scatterplot",defaults:function(a){return Rickshaw.extend(a(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function(a,b){a(b)},render:function(){var a=this.graph;a.vis.selectAll("*").remove(),a.series.forEach(function(b){if(!b.disabled){var c=a.vis.selectAll("path").data(b.stack.filter(function(a){return null!==a.y})).enter().append("svg:circle").attr("cx",function(b){return a.x(b.x)}).attr("cy",function(b){return a.y(b.y)}).attr("r",function(b){return"r"in b?b.r:a.renderer.dotSize});Array.prototype.forEach.call(c[0],function(a){a.setAttribute("fill",b.color)})}},this)}}),Rickshaw.namespace("Rickshaw.Graph.Smoother"),Rickshaw.Graph.Smoother=function(a){this.graph=a.graph,this.element=a.element;var b=this;this.aggregationScale=1,this.element&&$(function(){$(b.element).slider({min:1,max:100,slide:function(a,c){b.setScale(c.value),b.graph.update()}})}),b.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:function(a){if(1==b.aggregationScale)return a;var c=[];return a.forEach(function(a){for(var d=[];a.length;){var e=0,f=0,g=a.splice(0,b.aggregationScale);g.forEach(function(a){e+=a.x/g.length,f+=a.y/g.length}),d.push({x:e,y:f})}c.push(d)}),c}}),this.setScale=function(a){if(1>a)throw"scale out of range: "+a;this.aggregationScale=a,this.graph.update()}},Rickshaw.namespace("Rickshaw.Graph.Unstacker"),Rickshaw.Graph.Unstacker=function(a){this.graph=a.graph;var b=this;this.graph.stackData.hooks.after.push({name:"unstacker",f:function(a){return b.graph.renderer.unstack?(a.forEach(function(a){a.forEach(function(a){a.y0=0})}),a):a}})},Rickshaw.namespace("Rickshaw.Series"),Rickshaw.Series=Rickshaw.Class.create(Array,{initialize:function(a,b,c){c=c||{},this.palette=new Rickshaw.Color.Palette(b),this.timeBase="undefined"==typeof c.timeBase?Math.floor((new Date).getTime()/1e3):c.timeBase;var d="undefined"==typeof c.timeInterval?1e3:c.timeInterval;this.setTimeInterval(d),a&&"object"==typeof a&&a instanceof Array&&a.forEach(function(a){this.addItem(a)},this)},addItem:function(a){if("undefined"==typeof a.name)throw"addItem() needs a name";a.color=a.color||this.palette.color(a.name),a.data=a.data||[],0==a.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(b){a.data.push({x:b.x,y:0})}):0==a.data.length&&a.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(a),this.legend&&this.legend.addLine(this.itemByName(a.name))},addData:function(a){var b=this.getIndex();Rickshaw.keys(a).forEach(function(a){this.itemByName(a)||this.addItem({name:a})},this),this.forEach(function(c){c.data.push({x:(b*this.timeInterval||1)+this.timeBase,y:a[c.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(a){for(var b=0;b<this.length;b++)if(this[b].name==a)return this[b]},setTimeInterval:function(a){this.timeInterval=a/1e3},setTimeBase:function(a){this.timeBase=a},dump:function(){var a={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(b){var c={color:b.color,name:b.name,data:[]};b.data.forEach(function(a){c.data.push({x:a.x,y:a.y})}),a.items.push(c)}),a},load:function(a){a.timeInterval&&(this.timeInterval=a.timeInterval),a.timeBase&&(this.timeBase=a.timeBase),a.items&&a.items.forEach(function(a){this.push(a),this.legend&&this.legend.addLine(this.itemByName(a.name))},this)}}),Rickshaw.Series.zeroFill=function(a){Rickshaw.Series.fill(a,0)},Rickshaw.Series.fill=function(a,b){for(var c,d=0,e=a.map(function(a){return a.data});d<Math.max.apply(null,e.map(function(a){return a.length}));)c=Math.min.apply(null,e.filter(function(a){return a[d]}).map(function(a){return a[d].x})),e.forEach(function(a){a[d]&&a[d].x==c||a.splice(d,0,{x:c,y:b})}),d++},Rickshaw.namespace("Rickshaw.Series.FixedDuration"),Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(a,b,c){var c=c||{};if("undefined"==typeof c.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof c.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new Rickshaw.Color.Palette(b),this.timeBase="undefined"==typeof c.timeBase?Math.floor((new Date).getTime()/1e3):c.timeBase,this.setTimeInterval(c.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=c.maxDataPoints,a&&"object"==typeof a&&a instanceof Array&&(a.forEach(function(a){this.addItem(a)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var d=this.maxDataPoints-this.currentSize-1;d>0;d--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(a){a.data.unshift({x:((d-1)*this.timeInterval||1)+this.timeBase,y:0,i:d})},this)},addData:function(a,b){if(a(b),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(a){a.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}});