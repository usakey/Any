!function(a,b,c,d){"use strict";d.Extension.Paginator=d.Footer.extend({className:"paginator",windowSize:10,fastForwardHandleLabels:{first:"《",prev:"〈",next:"〉",last:"》"},template:b.template('<tr><td colspan="<%= colspan %>"><ul><% _.each(handles, function (handle) { %><li <% if (handle.className) { %>class="<%= handle.className %>"<% } %>><a href="#" <% if (handle.title) {%> title="<%= handle.title %>"<% } %>><%= handle.label %></a></li><% }); %></ul></td></tr>'),events:{"click a":"changePage"},initialize:function(a){d.Footer.prototype.initialize.call(this,a);var b=this.columns;this.listenTo(b,"add",this.render),this.listenTo(b,"remove",this.render),this.listenTo(b,"change:renderable",this.render);var c=this.collection,e=c.fullCollection;e?(this.listenTo(e,"add",this.render),this.listenTo(e,"remove",this.render),this.listenTo(e,"reset",this.render)):(this.listenTo(c,"add",this.render),this.listenTo(c,"remove",this.render),this.listenTo(c,"reset",this.render))},changePage:function(b){b.preventDefault();var c=a(b.target).text(),d=this.fastForwardHandleLabels,e=this.collection;if(d)switch(c){case d.first:return void e.getFirstPage();case d.prev:return void(e.hasPrevious()&&e.getPreviousPage());case d.next:return void(e.hasNext()&&e.getNextPage());case d.last:return void e.getLastPage()}var f=e.state,g=1*a(b.target).text()-f.firstPage;e.getPage(0===f.firstPage?g:g+1)},makeHandles:function(){var a=[],b=this.collection,c=b.state,d=c.lastPage?c.lastPage:c.firstPage;d=0===c.firstPage?d:d-1;var e=0===c.firstPage?c.currentPage:c.currentPage-1,f=Math.floor(e/this.windowSize)*this.windowSize,g=f+this.windowSize;if(g=d>=g?g:d+1,"infinite"!==b.mode)for(var h=f;g>h;h++)a.push({label:h+1,title:"No. "+(h+1),className:e===h?"active":void 0});var i=this.fastForwardHandleLabels;return i&&(i.prev&&a.unshift({label:i.prev,className:b.hasPrevious()?void 0:"disabled"}),i.first&&a.unshift({label:i.first,className:b.hasPrevious()?void 0:"disabled"}),i.next&&a.push({label:i.next,className:b.hasNext()?void 0:"disabled"}),i.last&&a.push({label:i.last,className:b.hasNext()?void 0:"disabled"})),a},render:function(){this.$el.empty();var c=b.reduce(this.columns.pluck("renderable"),function(a,b){return b?a+1:a},0);return this.$el.append(a(this.template({colspan:c,handles:this.makeHandles()}))),this}})}(jQuery,_,Backbone,Backgrid);