function pieChartUpdate(a){a.disabled=!a.disabled,d3.select(this).classed("disabled",a.disabled),pieChart.pie.values()(testData).filter(function(a){return!a.disabled}).length||(pieChart.pie.values()(testData).map(function(a){return a.disabled=!1,a}),pieFooter.selectAll(".control").classed("disabled",!1)),d3.select("#sources-chart-pie svg").transition().call(pieChart)}function lineChartOperaHack(){navigator.userAgent.indexOf("Opera")&&(clearTimeout(lineResize),lineResize=setTimeout(lineChart.update,300))}function sinAndCos(){for(var a=[],b=[],c=0;100>c;c++)a.push({x:c,y:c%10==5?null:Math.sin(c/10)}),b.push({x:c,y:.5*Math.cos(c/10)});return[{area:!0,values:a,key:"Sine Wave"},{values:b,key:"Cosine Wave"}]}function getData(){for(var a=[],b=new Date(2012,1,1,0,0,0,0),c=Math.floor(100*Math.random()),d=0;30>d;d++){var e=c+Math.floor(5*Math.random()-2);c=e,a.push({x:new Date(b.getTime()),y:e}),b.setDate(b.getDate()+1)}return a}var testData=testData(["Search","Referral","Direct","Organic"],25),pieSelect=d3.select("#sources-chart-pie"),pieFooter=d3.select("#data-chart-footer"),stackedChart,lineChart,pieChart,barChart,lineResize;nv.addGraph(function(){for(var a=0;a<testData.length;a++)testData[a].y=Math.floor(d3.sum(testData[a].values,function(a){return a.y}));var b=nv.models.pieChartTotal().x(function(a){return a.key}).margin({top:0,right:20,bottom:20,left:20}).values(function(a){return a}).color(COLOR_VALUES).showLabels(!1).showLegend(!1).tooltipContent(function(a,b){return"<h4>"+a+"</h4><p>"+b+"</p>"}).total(function(a){return"<div class='visits'>"+a+"<br/> visits </div>"}).donut(!0);b.pie.margin({top:10,bottom:-20});var c=d3.sum(testData,function(a){return a.y});return pieFooter.append("div").classed("controls",!0).selectAll("div").data(testData).enter().append("div").classed("control",!0).style("border-top",function(a,b){return"3px solid "+COLOR_VALUES[b]}).html(function(a){return"<div class='key'>"+a.key+"</div><div class='value'>"+Math.floor(100*a.y/c)+"%</div>"}).on("click",function(a){pieChartUpdate.apply(this,[a]),setTimeout(function(){stackedChart.update(),lineChart.update(),barChart.update(),lineChartOperaHack()},100)}),d3.select("#sources-chart-pie svg").datum([testData]).transition(500).call(b),nv.utils.windowResize(b.update),pieChart=b,b}),nv.addGraph(function(){var a=nv.models.multiBarChart().margin({left:30,bottom:20,right:0}).color(keyColor).controlsColor([$white,$white,$white]).showLegend(!1);return a.yAxis.showMaxMin(!1).ticks(0).tickFormat(d3.format(",.f")),a.xAxis.showMaxMin(!1).tickFormat(function(a){return d3.time.format("%b %d")(new Date(a))}),d3.select("#sources-chart-bar svg").datum(testData).transition().duration(500).call(a),nv.utils.windowResize(a.update),barChart=a,a}),nv.addGraph(function(){var a=nv.models.stackedAreaChart().margin({left:0}).color(keyColor).showControls(!1).showLegend(!1).style("stream").controlsColor([$textColor,$textColor,$textColor]);return a.yAxis.showMaxMin(!1).tickFormat(d3.format(",f")),a.xAxis.showMaxMin(!1).tickFormat(function(a){return d3.time.format("%b %d")(new Date(a))}),d3.select("#sources-chart-stacked svg").datum(testData).transition().duration(500).call(a),nv.utils.windowResize(a.update),a.stacked.dispatch.on("areaClick.updateExamples",function(){setTimeout(function(){lineChart.update(),pieChart.update(),barChart.update(),pieSelect.selectAll(".control").classed("disabled",function(a){return a.disabled})},100)}),stackedChart=a,a}),nv.addGraph(function(){var a=nv.models.lineChart().margin({top:0,bottom:25,left:30,right:0}).showLegend(!1).color(keyColor);return a.yAxis.showMaxMin(!1).tickFormat(d3.format(",.f")),a.xAxis.showMaxMin(!1).tickFormat(function(a){return d3.time.format("%b %d")(new Date(a))}),testData[0].area=!0,testData[3].area=!0,d3.select("#sources-chart-line svg").datum(testData).transition().duration(500).call(a),nv.utils.windowResize(a.update),lineChart=a,lineChartOperaHack(),a});