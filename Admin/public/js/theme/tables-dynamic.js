$(function(){function a(a){var b=[{name:"id",label:"ID",editable:!1,cell:Backgrid.IntegerCell.extend({orderSeparator:""})},{name:"name",label:"Name",cell:"string"},{name:"pop",label:"Population",cell:"integer"},{name:"url",label:"URL",cell:"uri"}];$(window).width()<768&&b.splice(3,1);var c=new Backgrid.Grid({columns:b,collection:a,footer:Backgrid.Extension.Paginator.extend({template:_.template('<tr><td colspan="<%= colspan %>"><ul class="pagination"><% _.each(handles, function (handle) { %><li <% if (handle.className) { %>class="<%= handle.className %>"<% } %>><a href="#" <% if (handle.title) {%> title="<%= handle.title %>"<% } %>><%= handle.label %></a></li><% }); %></ul></td></tr>')}),className:"table table-striped table-editable no-margin"});$("#table-dynamic").html(c.render().$el)}var b,c=Backbone.Model.extend({}),d=Backbone.PageableCollection.extend({model:c,url:"lib/examples/pageable-territories.json",state:{pageSize:9},mode:"client"}),e=new d,f=e;$(window).resize(function(){clearTimeout(b),b=setTimeout(function(){a(e)},200)}),a(e),$("#search").change(function(){var b=$(this),c=f.fullCollection.filter(function(a){return~a.get("name").toUpperCase().indexOf(b.val().toUpperCase())});a(new d(c,{state:{firstPage:1,currentPage:1}}))}),e.fetch(),$.extend(!0,$.fn.dataTable.defaults,{sDom:"<'row'<'col-md-6'l><'col-md-6'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page"}}),$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"}),$.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:-1===a._iDisplayLength?0:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:-1===a._iDisplayLength?0:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}},$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=function(b){b.preventDefault(),a.oApi._fnPageChange(a,b.data.action)&&c(a)};$(b).append('<ul class="pagination"><li class="prev disabled"><a href="#">'+d.sPrevious+'</a></li><li class="next disabled"><a href="#">'+d.sNext+"</a></li></ul>");var f=$("a",b);$(f[0]).bind("click.DT",{action:"previous"},e),$(f[1]).bind("click.DT",{action:"next"},e)},fnUpdate:function(a,b){var c,d,e,f,g,h,i=5,j=a.oInstance.fnPagingInfo(),k=a.aanFeatures.p,l=Math.floor(i/2);for(j.iTotalPages<i?(g=1,h=j.iTotalPages):j.iPage<=l?(g=1,h=i):j.iPage>=j.iTotalPages-l?(g=j.iTotalPages-i+1,h=j.iTotalPages):(g=j.iPage-l+1,h=g+i-1),c=0,d=k.length;d>c;c++){for($("li:gt(0)",k[c]).filter(":not(:last)").remove(),e=g;h>=e;e++)f=e==j.iPage+1?'class="active"':"",$("<li "+f+'><a href="#">'+e+"</a></li>").insertBefore($("li:last",k[c])[0]).bind("click",function(c){c.preventDefault(),a._iDisplayStart=(parseInt($("a",this).text(),10)-1)*j.iLength,b(a)});0===j.iPage?$("li:first",k[c]).addClass("disabled"):$("li:first",k[c]).removeClass("disabled"),j.iPage===j.iTotalPages-1||0===j.iTotalPages?$("li:last",k[c]).addClass("disabled"):$("li:last",k[c]).removeClass("disabled")}}}});var g=[];$("#datatable-table").find("thead th").each(function(){g.push($(this).hasClass("no-sort")?{bSortable:!1}:null)}),$("#datatable-table").dataTable({sDom:"<'row table-top-control'<'col-md-6 hidden-xs per-page-selector'l><'col-md-6'f>r>t<'row table-bottom-control'<'col-md-6'i><'col-md-6'p>>",oLanguage:{sLengthMenu:"_MENU_ &nbsp; records per page"},aoColumns:g}),$(".chzn-select, .dataTables_length select").select2({minimumResultsForSearch:10})});